ignore:
  field_paths:
    - "RequestCertificateInput.IdempotencyToken"
    - "RequestCertificateInput.ValidationMethod"
operations:
  RequestCertificate:
    resource_name: Certificate
    operation_type: CREATE
  # NOTE(jaypipes): There is a GetCertificate API call, but that returns the
  # actual cert bytes, not the attributes of the certificate request
  DescribeCertificate:
    resource_name: Certificate
    operation_type: READ_ONE
  UpdateCertificateOptions:
    resource_name: Certificate
    operation_type: UPDATE
resources:
  Certificate:
    hooks:
      sdk_create_pre_build_request:
        template_path: hooks/certificate/sdk_create_pre_build_request.go.tpl
      sdk_create_post_build_request:
        # NOTE(jaypipes): We only support DNS-based validation, because
        # certificate renewal is not really automatable when email verification
        # is used.
        #
        # See discussion here:
        # https://docs.aws.amazon.com/acm/latest/userguide/email-validation.html
        #
        # Unfortunately, because fields in the "ignore" configuration list are
        # now deleted from the aws-sdk-go private/model/api.Shape object,
        # setting `override_values` above does not work :(
        code: input.SetValidationMethod("DNS")
      sdk_read_one_pre_set_output:
        template_path: hooks/certificate/sdk_read_one_pre_set_output.go.tpl
    exceptions:
      terminal_codes:
        - InvalidParameter
        - InvalidDomainValidationOptionsException 
        - InvalidTagException
        - TagPolicyException
        - TooManyTagsException 
    reconcile:
      requeue_on_success_seconds: 60
    fields:
      DomainValidationOptions:
        late_initialize: {}
      Options:
        late_initialize: {}
      SubjectAlternativeNames:
        late_initialize: {}
      KeyAlgorithm:
        late_initialize: {}
      # NOTE(jaypipes): The Create operation (RequestCertificate) has a
      # response with only a single field (certificateArn). All of the status
      # fields for the certificate are in the ReadOne operation
      # (DescribeCertificate) response, so we need to tell the code-generator
      # about all of those fields manually here...
      CreatedAt:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.CreatedAt
      DomainValidations:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.DomainValidationOptions
      ExtendedKeyUsages:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.ExtendedKeyUsages
      FailureReason:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.FailureReason
      ImportedAt:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.ImportedAt
      InUseBy:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.InUseBy
      IssuedAt:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.IssuedAt
      Issuer:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.Issuer
      KeyUsages:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.KeyUsages
      NotAfter:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.NotAfter
      NotBefore:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.NotBefore
      RenewalEligibility:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.RenewalEligibility
      RenewalSummary:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.RenewalSummary
      RevocationReason:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.RevocationReason
      RevokedAt:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.RevokedAt
      Serial:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.Serial
      SignatureAlgorithm:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.SignatureAlgorithm
      Status:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.Status
      Subject:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.Subject
      Type:
        is_read_only: true
        from:
          operation: DescribeCertificate
          path: Certificate.Type
